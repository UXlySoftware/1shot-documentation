
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WNFJCLZDV3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-WNFJCLZDV3');
    </script>
    
    <title>Smart Contract Methods &#8212; 1Shot Docs</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=01f34227"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=18a8d5f5"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'basics/contract-methods';</script>
    <link rel="canonical" href="https://docs.1shotapi.com/basics/contract-methods.html" />
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Supported Blockchain Networks" href="networks.html" />
    <link rel="prev" title="Wallets" href="wallets.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/1shot-logo.svg" class="logo__image only-light" alt="1Shot Docs - Home"/>
    <img src="../_static/1shot-logo.svg" class="logo__image only-dark pst-js-only" alt="1Shot Docs - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    The Basics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../automation/index.html">
    Onchain Automation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../x402/index.html">
    x402 Facilitator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../prompts/index.html">
    1Shot Prompts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API Docs
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://x.com/1shotapi" title="X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-x-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://t.me/oneshotapi" title="Telegram" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-telegram fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Telegram</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/@1ShotAPI" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    The Basics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../automation/index.html">
    Onchain Automation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../x402/index.html">
    x402 Facilitator
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../prompts/index.html">
    1Shot Prompts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API Docs
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://x.com/1shotapi" title="X" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-x-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">X</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://t.me/oneshotapi" title="Telegram" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-telegram fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Telegram</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/@1ShotAPI" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="businesses-and-teams.html">Businesses and Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="wallets.html">Wallets</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Smart Contract Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="networks.html">Supported Blockchain Networks</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">The Basics</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Smart Contract Methods</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="smart-contract-methods">
<h1>Smart Contract Methods<a class="headerlink" href="#smart-contract-methods" title="Link to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before you can configure endpoints to call contract methods, you’ll need to provision and fund a <a class="reference external" href="wallets.html">wallet</a>.</p>
</div>
<p>Contract method endpoints are the core of the 1Shot API. They are the RESTful endpoints you configure to read from and write to smart contracts on the blockchain.
Each contract method endpoint is linked to a single default wallet and can be configured to accept a specific set of input parameters. In order to
configure a contract method, you’ll need to provide the following information:</p>
<ol class="arabic simple">
<li><p>A target blockchain network (Ethereum mainnet, Binance Smart Chain, Avalanche, etc.)</p></li>
<li><p>The contract address of the smart contract you want to interact with</p></li>
<li><p>The name of the method you want to call on the contract</p></li>
<li><p>Input parameters the method expects</p></li>
<li><p>(optional) A webhook URL to receive real-time feedback on the status of transactions created from calling the method</p></li>
</ol>
<p>Once you’ve configured an endpoint, you can trigger the transaction by making a POST request to the 1Shot API with
your <a class="reference external" href="api.html">API key and secret</a>. You’ll need to grab the <code class="docutils literal notranslate"><span class="pre">CONTRACT_METHOD_ENDPOINT_ID</span></code> of the endpoint from the 1Shot API dashboard.</p>
<section id="example-base-usdc-transfer">
<h2>Example: Base USDC Transfer<a class="headerlink" href="#example-base-usdc-transfer" title="Link to this heading">#</a></h2>
<img alt="USDC Transfer Example" class="align-center" src="../_images/usdc-example.gif" />
<br /><p>In this example, we’ll configure a transaction endpoint to transfer USDC tokens from our escrow wallet to a recipient. We’ll assume you’ve
already created and funded a <a class="reference external" href="/basics/wallets.html">wallet</a> for the Base L2 network with BaseETH and that it contains some USDC tokens.</p>
<p>We’ll start by clicking the “Create a New Endpoint” button on the Transactions page. Give the endpoint a name and description, then select the
Base L2 network from the dropdown. Fill in the webhook URL if you want to receive real-time feedback on the transaction status.</p>
<p>On the next page, we will enter <code class="docutils literal notranslate"><span class="pre">transfer</span></code> as the function name we want to call on the USDC contract address <a class="reference external" href="https://basescan.org/token/0x833589fcd6edb6e08f4c7c32d4f71b54bda02913">0x833589fcd6edb6e08f4c7c32d4f71b54bda02913</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transfer</span></code> function on the USDC contract expects the following input parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to</span></code>: The address to transfer the tokens to which is a primitive type <code class="docutils literal notranslate"><span class="pre">address</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: The amount of tokens to transfer (USDC has 18 decimal places) which is a primitive type <code class="docutils literal notranslate"><span class="pre">uint256</span></code></p></li>
</ul>
<p>We’ll set both of these parameters to be <code class="docutils literal notranslate"><span class="pre">Dynamic</span></code> so because we will pass both of them as input parameters when we call the API endpoit.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can also set parameters to be <code class="docutils literal notranslate"><span class="pre">Static</span></code> if you want to hardcode them in the transaction endpoint configuration. This is useful, for example,
if you always want to transfer the same amount of tokens every time but to different addresses.</p>
</div>
</section>
<section id="contract-method-parameters">
<h2>Contract Method Parameters<a class="headerlink" href="#contract-method-parameters" title="Link to this heading">#</a></h2>
<p>At the highest configuration level, input paramerters can be either <code class="docutils literal notranslate"><span class="pre">primitive</span></code>, <code class="docutils literal notranslate"><span class="pre">array</span></code>, or <code class="docutils literal notranslate"><span class="pre">struct</span></code> types. A <code class="docutils literal notranslate"><span class="pre">primitive</span></code> is a type like
<code class="docutils literal notranslate"><span class="pre">uint</span></code> or <code class="docutils literal notranslate"><span class="pre">bool</span></code> that is not composed of other types and is likely the most common input type. An <code class="docutils literal notranslate"><span class="pre">array</span></code> is a collection
of the same type of elements, and a <code class="docutils literal notranslate"><span class="pre">struct</span></code> is a collection of different types of elements.</p>
<section id="static-vs-dynamic-parameters">
<h3>Static vs Dynamic Parameters<a class="headerlink" href="#static-vs-dynamic-parameters" title="Link to this heading">#</a></h3>
<p>When configuring a method endpoint, input parameters can be either <code class="docutils literal notranslate"><span class="pre">Static</span></code> or <code class="docutils literal notranslate"><span class="pre">Dynamic</span></code>. Parameters set to <code class="docutils literal notranslate"><span class="pre">Static</span></code> will be hardcoded in the
method endpoint configuration and are not specified in the request payload when calling the API. Parameters set to <code class="docutils literal notranslate"><span class="pre">Dynamic</span></code> will be passed as
input parameters when calling the API and can be different for each transaction. See <a class="reference external" href="api.html">Calling the 1Shot API</a> for more information on how
to trigger a transaction.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Only primitive types are supported for static parameters. Dynamic parameters can be primitive types or compound types like structs and arrays.
If your function takes a compound type, you’ll need to pass it as a JSON object in the request payload.</p>
</div>
</section>
<section id="struct-and-array-inputs">
<h3>Struct and Array Inputs<a class="headerlink" href="#struct-and-array-inputs" title="Link to this heading">#</a></h3>
<p>If the function you want to call takes a struct or array as an input parameter, you’ll need to define the structure of the input in the transaction
endpoint builder. Take the following example in which the input parameter is a struct which itself contains a <code class="docutils literal notranslate"><span class="pre">uint128</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, and <code class="docutils literal notranslate"><span class="pre">array</span></code> of booleans:</p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">struct</span><span class="w"> </span><span class="nv">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint128</span><span class="w"> </span><span class="nv">fooUint128</span><span class="p">;</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="nv">fooString</span><span class="p">;</span>
<span class="w">    </span><span class="kt">bool</span><span class="p">[]</span><span class="w"> </span>fooBoolArray<span class="p">;</span>
<span class="p">}</span>

<span class="kt">function</span><span class="w"> </span><span class="nv">callFooBar</span><span class="p">(</span>Foo<span class="w"> </span>calldata<span class="w"> </span>foo<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span>emit<span class="w"> </span>CalledFoo<span class="p">(</span>foo<span class="p">.</span>fooUint128<span class="p">,</span><span class="w"> </span>foo<span class="p">.</span>fooString<span class="p">,</span><span class="w"> </span>foo<span class="p">.</span>fooBoolArray<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The configuration for the input struct parameter, <code class="docutils literal notranslate"><span class="pre">foo</span></code>, would look like this:</p>
<img alt="Struct configuration example" class="align-center" src="../_images/struct-example.png" />
<br /><p>The payload used to <a class="reference external" href="api.html#triggering-a-transaction">call the API</a> endpoint would look like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;fooUint128&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;fooString&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;fooBoolArray&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="authorization-lists-eip-7702">
<h3>Authorization Lists: EIP-7702<a class="headerlink" href="#authorization-lists-eip-7702" title="Link to this heading">#</a></h3>
<p>1Shot API supports <a class="reference external" href="https://eips.ethereum.org/EIPS/eip-7702">EIP-7702</a> authorization lists for contract method endpoints. This allows you to use 1Shot API as relayer for user transactions without requiring users to front gas costs themselves. Any <code class="docutils literal notranslate"><span class="pre">write</span></code> endpoint can be passed an <code class="docutils literal notranslate"><span class="pre">authorizationList</span></code> parameter to automatically turn the resulting transaction into an EIP-7702 Type 4 transaction. Here is an example in Typescript:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">Wallet</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DEPLOYER_PRIVATE_KEY</span><span class="p">,</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">provider</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">chainId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">await</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">provider</span><span class="p">.</span><span class="nx">getNetwork</span><span class="p">()).</span><span class="nx">chainId</span><span class="p">;</span>

<span class="c1">// Get the contract instance</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">WALLET_CORE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">WALLET_CORE</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">WalletCore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">getContractAt</span><span class="p">(</span><span class="s2">&quot;WalletCore&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">WALLET_CORE</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">authorizationData</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">chainId</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">;</span>
<span class="w">    </span><span class="nx">address</span><span class="o">:</span><span class="w"> </span><span class="nx">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kc">undefined</span><span class="p">;</span>
<span class="w">    </span><span class="nx">nonce</span><span class="o">:</span><span class="w"> </span><span class="nx">any</span><span class="p">;</span>
<span class="w">    </span><span class="nx">yParity</span><span class="o">?:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">r</span><span class="o">?:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="w">    </span><span class="nx">s</span><span class="o">?:</span><span class="w"> </span><span class="nx">string</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">chainId</span><span class="o">:</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">toBeHex</span><span class="p">(</span><span class="nx">chainId</span><span class="p">.</span><span class="nx">toString</span><span class="p">()),</span>
<span class="w">    </span><span class="nx">address</span><span class="o">:</span><span class="w"> </span><span class="nx">WALLET_CORE</span><span class="p">,</span>
<span class="w">    </span><span class="nx">nonce</span><span class="o">:</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">toBeHex</span><span class="p">(</span><span class="nx">currentNonce</span><span class="p">),</span>
<span class="p">};</span>

<span class="c1">// Encode authorization data according to EIP-712 standard</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">encodedAuthorizationData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">concat</span><span class="p">([</span>
<span class="w">    </span><span class="s1">&#39;0x05&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// MAGIC code for EIP7702</span>
<span class="w">    </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">encodeRlp</span><span class="p">([</span>
<span class="w">        </span><span class="nx">authorizationData</span><span class="p">.</span><span class="nx">chainId</span><span class="p">,</span>
<span class="w">        </span><span class="nx">authorizationData</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span>
<span class="w">        </span><span class="nx">authorizationData</span><span class="p">.</span><span class="nx">nonce</span><span class="p">,</span>
<span class="w">    </span><span class="p">])</span>
<span class="p">]);</span>

<span class="c1">// Generate and sign authorization data hash</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">authorizationDataHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ethers</span><span class="p">.</span><span class="nx">keccak256</span><span class="p">(</span><span class="nx">encodedAuthorizationData</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">authorizationSignature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">wallet</span><span class="p">.</span><span class="nx">signingKey</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">authorizationDataHash</span><span class="p">);</span>

<span class="c1">// Now we execute the transaction using the authorizationData and Signature</span>
<span class="c1">// we created above.</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">execution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">oneshotClient</span><span class="p">.</span><span class="nx">contractMethods</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span>
<span class="w">  </span><span class="nx">contractMethodId</span><span class="p">,</span><span class="w"> </span><span class="c1">// the ID of the contract method endpoint</span>
<span class="w">  </span><span class="p">{},</span><span class="w"> </span><span class="c1">// input parameters</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nx">memo</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Sponsored 7702 upgrade transaction&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// optional memo for the transaction</span>
<span class="w">    </span><span class="nx">authorizationList</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="c1">// EIP-7702 authorization list</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nx">address</span><span class="o">:</span><span class="w"> </span><span class="nx">authorizationData</span><span class="p">.</span><span class="nx">address</span><span class="o">!</span><span class="p">,</span>
<span class="w">        </span><span class="nx">nonce</span><span class="o">:</span><span class="w"> </span><span class="nx">authorizationData</span><span class="p">.</span><span class="nx">nonce</span><span class="p">,</span>
<span class="w">        </span><span class="nx">chainId</span><span class="o">:</span><span class="w"> </span><span class="nb">Number</span><span class="p">(</span><span class="nx">authorizationData</span><span class="p">.</span><span class="nx">chainId</span><span class="p">),</span>
<span class="w">        </span><span class="nx">signature</span><span class="o">:</span><span class="w"> </span><span class="nx">authorizationSignature</span><span class="p">.</span><span class="nx">serialized</span><span class="p">,</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="webhooks">
<h2>Webhooks<a class="headerlink" href="#webhooks" title="Link to this heading">#</a></h2>
<p>Webhooks are an optional configuration for your transaction endpoints but are highly recommended as they provide immediate feedback to your application once a transaction
has been confirmed on the blockchain network. 1Shot API implements best practices for webhooks are discussed at <a class="reference external" href="https://webhooks.fyi/">webhooks.fyi</a>, which includes
replay protection and forward compatibility.</p>
<p>When you configure a webhook, 1Shot will send a POST request to the URL you provide with a JSON payload that looks like this:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;eventName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TransactionExecutionSuccess&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;businessId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c7c34dd2-4068-45b3-b894-081bbe68944d&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;chain&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11155111</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;logs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;0xD6AC871Ea68dD41774dA321B85e11D094b49aaa8&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;0xA1BfEd6c6F1C3A516590edDAc7A8e359C2189A61&quot;</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;fragment&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;anonymous&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;arrayChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;arrayLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;baseType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bytes32&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;indexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;role&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bytes32&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;arrayChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;arrayLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;baseType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;indexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;account&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;arrayChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;arrayLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;baseType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;indexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sender&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RoleGranted&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;event&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RoleGranted&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;signature&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RoleGranted(bytes32,address,address)&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;topic&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;0x9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a6&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;0xD6AC871Ea68dD41774dA321B85e11D094b49aaa8&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;0xA1BfEd6c6F1C3A516590edDAc7A8e359C2189A61&quot;</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;fragment&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;anonymous&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;arrayChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;arrayLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;baseType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bytes32&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;indexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;role&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bytes32&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;arrayChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;arrayLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;baseType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;indexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;account&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;arrayChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;arrayLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;baseType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;indexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sender&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RoleGranted&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;event&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RoleGranted&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;signature&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;RoleGranted(bytes32,address,address)&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;topic&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;0xb4FC5Efab498Ce8b60D0Ad1fc780B871D1199C32&quot;</span>
<span class="w">                </span><span class="p">],</span>
<span class="w">                </span><span class="nt">&quot;fragment&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;anonymous&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;arrayChildren&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;arrayLength&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;baseType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;components&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;indexed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;token&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;address&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TokenCreated&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;event&quot;</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TokenCreated&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;signature&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TokenCreated(address)&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;topic&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x2e2b3f61b70d2d131b2a807371103cc98d51adcaa5e9a8f9c32658ad8426e74e&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;transactionExecutionId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;57335f5e-7fc4-406f-ae9e-670b561ff7d9&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transactionExecutionMemo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{\&quot;tx_type\&quot;:0,\&quot;associated_user_id\&quot;:5034284669,\&quot;note_to_user\&quot;:\&quot;{\\\&quot;name\\\&quot;:\\\&quot;Test\\\&quot;,\\\&quot;ticker\\\&quot;:\\\&quot;TES\\\&quot;,\\\&quot;description\\\&quot;:\\\&quot;test token\\\&quot;,\\\&quot;image_file_id\\\&quot;:\\\&quot;AgACAgEAAxkBAAIDfWgiPNEzB-K22SSCR1JSs-i7gjb7AALgrTEbgroQRVyOzOUCHxPMAQADAgADeQADNgQ\\\&quot;}\&quot;}&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transactionId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;528c4ba0-e288-47d5-a78b-908cd882d3df&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;transactionReceipt&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TransactionReceipt&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;blobGasPrice&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;blobGasUsed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;blockHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1f3c257e72f364ea993ca69da45f34e22b550b097655bb248a3ad3556a246a54&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;blockNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8312770</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;contractAddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;cumulativeGasUsed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;41935874&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xD6AC871Ea68dD41774dA321B85e11D094b49aaa8&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;gasPrice&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1000017&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;gasUsed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;324143&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;hash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xbef4c293fa9ed89080bbf80ff960a1625182d0077b1d0dfe1699733588494cca&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;logs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xb4FC5Efab498Ce8b60D0Ad1fc780B871D1199C32&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1f3c257e72f364ea993ca69da45f34e22b550b097655bb248a3ad3556a246a54&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8312770</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">657</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;0x1cf3b03a6cf19fa2baba4df148e9dcabedea7f8a5c07840e207e5c089be95d3e&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x000000000000000000000000248c1e059619791d4743ebf84374edb311dc0306&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;transactionHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xbef4c293fa9ed89080bbf80ff960a1625182d0077b1d0dfe1699733588494cca&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xb4FC5Efab498Ce8b60D0Ad1fc780B871D1199C32&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1f3c257e72f364ea993ca69da45f34e22b550b097655bb248a3ad3556a246a54&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8312770</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x0000000000000000000000000000000000000000000000000de0b6b3a7640000&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">658</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x000000000000000000000000d6ac871ea68dd41774da321b85e11d094b49aaa8&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;transactionHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xbef4c293fa9ed89080bbf80ff960a1625182d0077b1d0dfe1699733588494cca&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xb4FC5Efab498Ce8b60D0Ad1fc780B871D1199C32&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1f3c257e72f364ea993ca69da45f34e22b550b097655bb248a3ad3556a246a54&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8312770</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">659</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;0x2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x000000000000000000000000d6ac871ea68dd41774da321b85e11d094b49aaa8&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x000000000000000000000000a1bfed6c6f1c3a516590eddac7a8e359c2189a61&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;transactionHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xbef4c293fa9ed89080bbf80ff960a1625182d0077b1d0dfe1699733588494cca&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xb4FC5Efab498Ce8b60D0Ad1fc780B871D1199C32&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1f3c257e72f364ea993ca69da45f34e22b550b097655bb248a3ad3556a246a54&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8312770</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">660</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;0x2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a6&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x000000000000000000000000d6ac871ea68dd41774da321b85e11d094b49aaa8&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="s2">&quot;0x000000000000000000000000a1bfed6c6f1c3a516590eddac7a8e359c2189a61&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;transactionHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xbef4c293fa9ed89080bbf80ff960a1625182d0077b1d0dfe1699733588494cca&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xb4FC5Efab498Ce8b60D0Ad1fc780B871D1199C32&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1f3c257e72f364ea993ca69da45f34e22b550b097655bb248a3ad3556a246a54&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8312770</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">661</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;0xc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;transactionHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xbef4c293fa9ed89080bbf80ff960a1625182d0077b1d0dfe1699733588494cca&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xA1BfEd6c6F1C3A516590edDAc7A8e359C2189A61&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x1f3c257e72f364ea993ca69da45f34e22b550b097655bb248a3ad3556a246a54&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;blockNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8312770</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x000000000000000000000000b4fc5efab498ce8b60d0ad1fc780b871d1199c32&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">662</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;topics&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s2">&quot;0x2e2b3f61b70d2d131b2a807371103cc98d51adcaa5e9a8f9c32658ad8426e74e&quot;</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;transactionHash&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xbef4c293fa9ed89080bbf80ff960a1625182d0077b1d0dfe1699733588494cca&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;transactionIndex&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;logsBloom&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0x00020004000000000000000000000000000000000008000000000000000000000000000000000000000000000000004000000800000000000004100040000000000000000000000000000008001000000000000200000000000000000000000000000000020000000000008000000800000000000000000000000010001000000000000010000000000800000000080000000000000080000040000000000400000000000000000000000000000000400000000000000000001000000010000000000002000000000200000000000000001000000004000100800000480020000000000000000000002000000000000000000000000000001000000000000000&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0xA1BfEd6c6F1C3A516590edDAc7A8e359C2189A61&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;userId&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1747074278</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;apiVersion&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;signature&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AacvQXGjpCLG/zu8JHhMwbFdHRx/BsOEt+wpVI4cwEiOvN8rzVD+i1IIWYlNgeHRV914giGkoWKsNRVhLV6PAA==&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="webhook-signatures">
<h3>Webhook Signatures<a class="headerlink" href="#webhook-signatures" title="Link to this heading">#</a></h3>
<p>1Shot API signs the webhook payload using the <a class="reference external" href="https://en.wikipedia.org/wiki/EdDSA#Ed25519">ed25519</a> signature scheme. A unique public-private keypair is generated for each URL assigned to a contract method (if you have two different contract methods that are each configured with the same callback URL, they will share the same signing keypair for authentication).</p>
<p>As shown in the example above, the signature is included in the JSON payload under the <code class="docutils literal notranslate"><span class="pre">signature</span></code> key. You should verify the signature using the public key provided in the contract method’s details page. The public key is a base64 encoded ed25519 public key that you can use to verify the signature.</p>
<p>Here is an example of a <a class="reference external" href="https://fastapi.tiangolo.com/tutorial/">FastAPI</a> server that verifies authenticates callbacks from 1Shot API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">Request</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">,</span> <span class="n">Depends</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base64</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cryptography.hazmat.primitives.asymmetric.ed25519</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ed25519PublicKey</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cryptography.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">InvalidSignature</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">()</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">verify_signature_decorator</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Extract the required fields from the request</span>
        <span class="n">body</span> <span class="o">=</span> <span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>  <span class="c1"># Raw request body</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;signature&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># Example header name</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">signature</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Signature field missing&quot;</span><span class="p">)</span>

        <span class="c1"># Decode the signature</span>
        <span class="n">signature_bytes</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

        <span class="c1"># Public key in base64 format from the Transaction Details Page</span>
        <span class="n">pubkey_b64</span> <span class="o">=</span> <span class="s2">&quot;1N7gklNt5gpfMIHhIUR+csMIb7oO4JX7Q7QTdqj7+Qw=&quot;</span>
        <span class="c1"># Load the public key</span>
        <span class="n">public_key</span> <span class="o">=</span> <span class="n">Ed25519PublicKey</span><span class="o">.</span><span class="n">from_public_bytes</span><span class="p">(</span>
            <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">pubkey_b64</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># Verify the signature</span>
        <span class="n">public_key</span><span class="o">.</span><span class="n">verify</span><span class="p">(</span><span class="n">signature_bytes</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">),</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">InvalidSignature</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">403</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="s2">&quot;Invalid signature&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HTTPException</span><span class="p">(</span><span class="n">status_code</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Internal error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/python&quot;</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="n">Depends</span><span class="p">(</span><span class="n">verify_signature_decorator</span><span class="p">)])</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_python_webhook</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Webhook received and signature verified&quot;</span><span class="p">}</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/healthcheck-python&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">root</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;webhook sinker is up!&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>A complete example you can run from your local machine using <a class="reference external" href="https://ngrok.com/">ngrok</a> tunnels can be
found <a class="reference external" href="https://github.com/UXlySoftware/webhook-sinker">here</a>.</p>
<p>Additionally, our <a class="reference external" href="/api/api.html#client-sdks">client SDKs</a> provide helper functions to verify webhook signatures.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="wallets.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Wallets</p>
      </div>
    </a>
    <a class="right-next"
       href="networks.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Supported Blockchain Networks</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-base-usdc-transfer">Example: Base USDC Transfer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contract-method-parameters">Contract Method Parameters</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#static-vs-dynamic-parameters">Static vs Dynamic Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#struct-and-array-inputs">Struct and Array Inputs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#authorization-lists-eip-7702">Authorization Lists: EIP-7702</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#webhooks">Webhooks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#webhook-signatures">Webhook Signatures</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, UXly Software.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>